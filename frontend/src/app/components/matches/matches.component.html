<div class="app-background">
	<div class="space-y-6 max-w-2xl mx-auto">

		@if (isLoading) {
			<app-loading-modal [message]="'Loading Matches...'"></app-loading-modal>
		}

		<section class="bg-white border border-gray-100 rounded-xl shadow-lg overflow-hidden">
			<div class="flex items-center gap-3 px-6 py-4 border-b border-gray-100 bg-gray-50/70">
				@if (currentLeague.logo) {
					<img [src]="currentLeague.logo" [alt]="currentLeague.leagueName + ' logo'" class="h-8 w-8 object-contain" />
				}
				<h2 class="text-xl font-bold text-gray-800">{{ currentLeague.leagueName }} Matches</h2>
			</div>

			@if (matches.length === 0) {
				<p class="px-6 py-8 text-center text-base text-gray-500">
					<span class="block mb-1">ðŸ“…</span>
					No matches available for this league in the selected date range.
				</p>
			}
			@else {
				<ul class="divide-y divide-gray-100">
					@for (match of displayedMatches; track match.homeTeam.name) {
						<li class="p-4 sm:p-6 hover:bg-indigo-50/20 transition duration-150 ease-in-out">
							<div class="flex justify-between items-center">

								<div class="flex flex-col space-y-2 w-full">

									<div class="flex items-center justify-start gap-3 w-full">
										<img [src]="match.homeTeam.logo" [alt]="match.homeTeam.name + ' logo'" class="h-6 w-6 object-contain" />
										<span class="text-base font-semibold text-gray-900 truncate">
											{{ match.homeTeam.name }}
										</span>
										<span class="text-sm font-normal text-gray-500 hidden sm:inline">
											({{ match.homeTeam.tla }})
										</span>
									</div>

									<div class="flex items-center justify-start gap-3 w-full">
										<img [src]="match.awayTeam.logo" [alt]="match.awayTeam.name + ' logo'" class="h-6 w-6 object-contain" />
										<span class="text-base font-semibold text-gray-900 truncate">
											{{ match.awayTeam.name }}
										</span>
										<span class="text-sm font-normal text-gray-500 hidden sm:inline">
											({{ match.awayTeam.tla }})
										</span>
									</div>

									<div class="mt-1 text-sm text-gray-500 font-medium">
										ðŸ“… {{ match.date | date : 'EEEE dd MMMM yyyy' }}
									</div>
								</div>

								<div class="shrink-0 ml-4 flex flex-col items-end text-right">
									<div class="flex flex-col items-end">
										<span class="text-xl font-extrabold text-gray-900 tabular-nums">
											{{ match.fullTime.home }}
										</span>
										<span class="text-xl font-extrabold text-gray-900 tabular-nums">
											{{ match.fullTime.away }}
										</span>
									</div>
								</div>
							</div>

							<div class="mt-3 pt-3 border-t border-dashed border-gray-100 flex items-center justify-between text-xs text-gray-500">
								<span class="font-medium">HT: {{ match.halfTime.home }} - {{ match.halfTime.away }}</span>
								<span class="hidden sm:inline">Duration: {{ match.duration }}</span>
								<span class="text-right truncate">Referee: {{ match.refereeName }}</span>
							</div>
						</li>
					}
				</ul>
				@if (hasMore()) {
					<div class="p-4 sm:p-6 pt-0">
						<button (click)="loadMoreMatches()"class="w-full app-button">
							Load More
						</button>
					</div>
				}
			}

			@if (errorMessage) {
				<div class="px-6 py-4 bg-red-50 border-t border-red-200">
					<p class="text-sm font-medium text-red-700">{{ errorMessage }}</p>
				</div>
			}
		</section>

		<app-go-back-button (previousPageFunc)="goBack()"></app-go-back-button>
	</div>
</div>